- table:
    name: chats
    schema: public
  select_permissions:
    - role: user
      permission:
        columns: ['id','title','updated_at']
        filter:
          user_id:
            _eq: X-Hasura-User-Id
        allow_aggregations: true
  insert_permissions:
    - role: user
      permission:
        check: {}
        set:
          user_id: x-hasura-User-Id
        columns: ['title']
  update_permissions:
    - role: user
      permission:
        columns: ['title']
        filter:
          user_id:
            _eq: X-Hasura-User-Id
  delete_permissions:
    - role: user
      permission:
        filter:
          user_id:
            _eq: X-Hasura-User-Id

- table:
    name: messages
    schema: public
  select_permissions:
    - role: user
      permission:
        columns: ['id','chat_id','role','content','created_at']
        filter:
          user_id:
            _eq: X-Hasura-User-Id
  insert_permissions:
    - role: user
      permission:
        check: {}
        set:
          user_id: x-hasura-User-Id
        columns: ['chat_id','role','content']
  update_permissions:
    - role: user
      permission:
        columns: ['content']
        filter:
          user_id:
            _eq: X-Hasura-User-Id
  delete_permissions:
    - role: user
      permission:
        filter:
          user_id:
            _eq: X-Hasura-User-Id


